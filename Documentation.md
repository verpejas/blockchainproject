

[//]: <> (`ctrl+k v` to view markdown preview)



# Blockchain Marketplace Project

This project is a decentralized application that allows users to create, view, and transfer objects on the Ethereum blockchain. The application includes a Solidity smart contract, a React frontend, and interaction with MetaMask.

## Prerequisites

Before setting up the project, ensure you have the following installed on your machine:

1. **Node.js and npm**:
   Install Node.js and npm using the package manager. (In my case, since I use Fedora Linux distribution, these dependencies will be installed via DNF package manager):
   ```bash
   sudo dnf install nodejs npm
   ```

2. **Truffle Framework**:
   Truffle is used for developing, deploying, and testing smart contracts:
   ```bash
   npm install -g truffle
   ```

3. **Ganache CLI**:
   Ganache is a local Ethereum blockchain for development:
   ```bash
   npm install -g ganache-cli
   ```

4. **MetaMask Extension**:
   Install the MetaMask browser extension from [here](https://metamask.io/).


## Project Structure
```bash
blockchain-project/
│
├── client/                       # React front-end
│   ├── public/
│   ├── src/
│   │   ├── App.js                # Main app logic
│   │   ├── web3.js               # Connect to blockchain
│   │   ├── contracts/            # Contains the copied ABI file
│   │   │   └── Marketplace.json  # ABI for Marketplace contract
│   │   └── components/           # React components
│   └── package.json              # Dependencies for the client
│
├── contracts/                    # Solidity contracts
│   └── Marketplace.sol           # Smart contract
│
├── migrations/
│   └── 2_deploy_contracts.js     # Deployment script
│
├── build/                        # Automatically generated after  compilation
│   └── contracts/                # Contains compiled contract and ABI
│       └── Marketplace.json      # ABI generated by Truffle
│
├── truffle-config.js             # Truffle configuration
└── package.json                  # Dependencies for the entire project
```


## Running the Local Blockchain

1. **Start Ganache**:
   Open a terminal and start the Ganache local blockchain:
   ```bash
   ganache-cli -e 10000 -db blockchaincourse.db
   ```
   
   Note: the added switches set the amount of ETH to 10 000 for all 10 accounts, and saves the configuration to a database file, so mnemonic passphrase does not change between restarts of Ganache server.
   
   Configuration is stored in the `blockchaincourse.db` database file
   

   Note: Ganache is running on port `8545` by default. If you want to change that, modify the `truffle-config.js` to match the running port.

## Compiling and Deploying Contracts

1. **Compile the Smart Contracts**:
   Ensure you are in the project root directory and run:
   ```bash
   truffle compile
   ```

2. **Migrate (Deploy) the Smart Contracts**:
   Deploy the contracts to the local Ganache blockchain:
   ```bash
   truffle migrate --network development
   ```

3. **Copy the ABI to Frontend**:
   After successful compilation, copy the `Marketplace.json` ABI file to the frontend:
   ```bash
   mkdir -p client/src/contracts
   cp build/contracts/Marketplace.json client/src/contracts/
   ```

## Running the Frontend Application

1. **Start the Frontend**:
   Navigate to the `client/` directory and start the React development server:
   ```bash
   cd client
   npm start
   ```

2. **Access the Web Application**:
   Open a browser and visit:
   ```
   http://localhost:3000
   ```

3. **Using MetaMask**:
   Ensure MetaMask is installed and connected to the local blockchain. Use the mnemonic 12-word passphrase provided by Ganache to import the whole `HD Wallet` into MetaMask and secure access to Metamask with an appropriate password.
   
   Set up the network in Metamask with:
   - RPC URL:`http://127.0.0.1:8545`
   - Chain ID: `1337`  `#default for Ganache`
   - Currency symbol: `ETH`

## Troubleshooting

- Ensure that Ganache is running on the correct port and matches the configuration in `truffle-config.js`.
- Ensure that Metamask is correctly configured: correct network configuration + correct mnemonic passphrase was entered.
- If there are issues with Metamask seeing more accounts than there ware in the HD wallet, reset Metamask preferences by removing and reinstalling the browser extension for simplicity.
